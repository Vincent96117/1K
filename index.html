<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>V178 HUNTER | æº–ç¢ºåƒ¹æ ¼ç‰ˆ</title>
    <style>
        body { background: #050505; color: #e0e0e0; font-family: sans-serif; padding: 20px; text-align: center; }
        .header { display: flex; justify-content: center; gap: 40px; background: #111; padding: 20px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px; }
        .market-card { min-width: 180px; }
        .price { font-size: 26px; font-weight: bold; color: #f2a900; margin-top: 5px; }
        .up { color: #00ff88; } .down { color: #ff3344; }
        #startBtn { background: #f2a900; color: #000; border: none; padding: 15px 40px; font-size: 18px; font-weight: bold; border-radius: 8px; cursor: pointer; margin-bottom: 30px; }
        #startBtn:disabled { background: #444; color: #888; }
        table { width: 100%; border-collapse: collapse; background: #111; margin-top: 10px; text-align: left; }
        th { background: #1a1a1a; color: #f2a900; padding: 15px; border-bottom: 2px solid #333; }
        td { padding: 15px; border-bottom: 1px solid #222; }
        .trigger-tag { background: #ff3344; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="market-card">
            <div>BTC / USDT</div>
            <div id="btc-price" class="price">è¼‰å…¥ä¸­...</div>
            <div id="btc-chg">--</div>
        </div>
        <div class="market-card">
            <div>ETH / USDT</div>
            <div id="eth-price" class="price">è¼‰å…¥ä¸­...</div>
            <div id="eth-chg">--</div>
        </div>
    </div>

    <button id="startBtn" onclick="startMonitoring()">ğŸš€ é–‹å§‹ V178 å¯¦æ™‚ç›£æ§</button>
    <div id="status" style="color:#888; margin-bottom:10px;">ç›®å‰ç‹€æ…‹ï¼šç­‰å¾…æŒ‡ä»¤</div>

    <table>
        <thead>
            <tr>
                <th>è§¸ç™¼æ™‚é–“</th>
                <th>å¹£ç¨®åç¨±</th>
                <th>1m çˆ†ç™¼æ¼²å¹…</th>
                <th>V178 å³æ™‚è©•åˆ†</th>
                <th>ç•¶å‰åƒ¹æ ¼</th>
            </tr>
        </thead>
        <tbody id="watchlist"></tbody>
    </table>

<script>
    const watchlistSymbols = new Set();
    let isRunning = false;
    let btcChange = 0;

    // ä¿®æ­£å¾Œçš„åƒ¹æ ¼æŠ“å–é‚è¼¯
    async function updateMarket() {
        try {
            // ç›´æ¥æŒ‡å®š BTC å’Œ ETHï¼Œä¸å¾å¤§æ¸…å–®æ‰¾ï¼Œé¿å…å°éŒ¯ä½
            const res = await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr?symbols=["BTCUSDT","ETHUSDT"]');
            const data = await res.json();
            
            data.forEach(c => {
                const isBTC = (c.symbol === "BTCUSDT");
                const price = parseFloat(c.lastPrice).toLocaleString(undefined, {minimumFractionDigits: 2});
                const chg = parseFloat(c.priceChangePercent).toFixed(2);
                
                if(isBTC) btcChange = parseFloat(c.priceChangePercent);
                
                document.getElementById(isBTC ? 'btc-price' : 'eth-price').innerText = price;
                const chgEl = document.getElementById(isBTC ? 'btc-chg' : 'eth-chg');
                chgEl.innerText = `${chg}%`;
                chgEl.className = chg >= 0 ? 'up' : 'down';
            });
        } catch (e) { console.error("åƒ¹æ ¼æ›´æ–°å¤±æ•—"); }
    }

    async function scan() {
        if (!isRunning) return;
        document.getElementById('status').innerText = `æ­£åœ¨æƒæå…¨å ´... æœ€å¾Œæ›´æ–°: ${new Date().toLocaleTimeString()}`;
        
        try {
            const res = await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr');
            const all = await res.json();
            // æ’é™¤ä½ æŒ‡å®šçš„ BTC, ETH, SOL, XRP, BNB, BNX
            const filtered = all.filter(c => !['BTCUSDT','ETHUSDT','SOLUSDT','XRPUSDT','BNBUSDT','BNXUSDT'].includes(c.symbol));
            const top100 = filtered.sort((a,b) => b.quoteVolume - a.quoteVolume).slice(0, 100);

            for (let coin of top100) {
                if (watchlistSymbols.has(coin.symbol)) {
                    document.getElementById(`price-${coin.symbol}`).innerText = coin.lastPrice;
                    const rs = (parseFloat(coin.priceChangePercent) - btcChange) * 10;
                    document.getElementById(`score-${coin.symbol}`).innerText = Math.floor(rs + 20);
                    continue;
                }

                const kRes = await fetch(`https://fapi.binance.com/fapi/v1/klines?symbol=${coin.symbol}&interval=1m&limit=2`);
                const k = await kRes.json();
                const k1_open = parseFloat(k[0][1]);
                const k2_close = parseFloat(k[1][4]);
                const growth = ((k2_close - k1_open) / k1_open) * 100;

                if (growth >= 1.5) {
                    watchlistSymbols.add(coin.symbol);
                    const rs = (parseFloat(coin.priceChangePercent) - btcChange) * 10;
                    const score = Math.floor(rs + 20);
                    
                    const row = `<tr>
                        <td>${new Date().toLocaleTimeString()}</td>
                        <td><b>${coin.symbol.replace('USDT','')}</b></td>
                        <td class="up">+${growth.toFixed(2)}% <span class="trigger-tag">çˆ†ç™¼</span></td>
                        <td><span id="score-${coin.symbol}" style="font-weight:bold; color:#f2a900">${score}</span></td>
                        <td id="price-${coin.symbol}">${coin.lastPrice}</td>
                    </tr>`;
                    document.getElementById('watchlist').insertAdjacentHTML('afterbegin', row);
                }
            }
        } catch (e) {}
    }

    function startMonitoring() {
        isRunning = true;
        document.getElementById('startBtn').disabled = true;
        document.getElementById('startBtn').innerText = "ğŸ“¡ ç›£æ§é€²è¡Œä¸­...";
        setInterval(scan, 4000); 
        scan();
    }

    setInterval(updateMarket, 2000);
    updateMarket();
</script>
</body>
</html>
