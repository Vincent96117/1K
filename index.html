<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>V178 HUNTER | çµ‚æ¥µåƒ¹æ ¼ä¿®æ­£ç‰ˆ</title>
    <style>
        body { background: #050505; color: #e0e0e0; font-family: sans-serif; padding: 20px; text-align: center; }
        .header { display: flex; justify-content: center; gap: 40px; background: #111; padding: 20px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px; }
        .market-card { min-width: 200px; padding: 10px; border-right: 1px solid #222; }
        .market-card:last-child { border-right: none; }
        .label { color: #888; font-size: 14px; margin-bottom: 5px; }
        .price { font-size: 28px; font-weight: bold; color: #f2a900; }
        .up { color: #00ff88; font-weight: bold; } .down { color: #ff3344; font-weight: bold; }
        
        #startBtn { background: #f2a900; color: #000; border: none; padding: 15px 40px; font-size: 18px; font-weight: bold; border-radius: 8px; cursor: pointer; margin: 20px 0; }
        #startBtn:disabled { background: #444; color: #888; cursor: wait; }
        
        table { width: 100%; border-collapse: collapse; background: #111; margin-top: 10px; text-align: left; }
        th { background: #1a1a1a; color: #f2a900; padding: 15px; border-bottom: 2px solid #333; }
        td { padding: 15px; border-bottom: 1px solid #222; font-size: 16px; }
        .trigger-tag { background: #ff3344; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="market-card">
            <div class="label">BTC / USDT</div>
            <div id="btc-price" class="price">--</div>
            <div id="btc-chg">--</div>
        </div>
        <div class="market-card">
            <div class="label">ETH / USDT</div>
            <div id="eth-price" class="price">--</div>
            <div id="eth-chg">--</div>
        </div>
    </div>

    <button id="startBtn" onclick="startMonitoring()">ğŸš€ é–‹å§‹ V178 å¯¦æ™‚ç›£æ§</button>
    <div id="status" style="color:#888; margin-bottom:15px;">ç›®å‰ç‹€æ…‹ï¼šç­‰å¾…æŒ‡ä»¤</div>

    <table>
        <thead>
            <tr>
                <th>è§¸ç™¼æ™‚é–“</th>
                <th>å¹£ç¨®åç¨±</th>
                <th>1m çˆ†ç™¼æ¼²å¹…</th>
                <th>V178 å³æ™‚è©•åˆ†</th>
                <th>ç•¶å‰åƒ¹æ ¼</th>
            </tr>
        </thead>
        <tbody id="watchlist"></tbody>
    </table>

<script>
    const watchlistSymbols = new Set();
    let isRunning = false;
    let btcChangeGlobal = 0;

    // çµ‚æ¥µåƒ¹æ ¼ä¿®æ­£é‚è¼¯ï¼šåˆ†é–‹è«‹æ±‚ï¼Œä¸å†å°éŒ¯ä½
    async function updateMarket() {
        try {
            const symbols = ["BTCUSDT", "ETHUSDT"];
            const results = await Promise.all(symbols.map(s => 
                fetch(`https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=${s}`).then(r => r.json())
            ));

            results.forEach(data => {
                const isBTC = data.symbol === "BTCUSDT";
                const price = parseFloat(data.lastPrice).toLocaleString(undefined, {minimumFractionDigits: 2});
                const chg = parseFloat(data.priceChangePercent).toFixed(2);
                
                if(isBTC) btcChangeGlobal = parseFloat(data.priceChangePercent);
                
                document.getElementById(isBTC ? 'btc-price' : 'eth-price').innerText = price;
                const chgEl = document.getElementById(isBTC ? 'btc-chg' : 'eth-chg');
                chgEl.innerText = `${chg >= 0 ? '+' : ''}${chg}%`;
                chgEl.className = chg >= 0 ? 'up' : 'down';
            });
        } catch (e) { console.error("åƒ¹æ ¼è«‹æ±‚ç•°å¸¸", e); }
    }

    async function scan() {
        if (!isRunning) return;
        document.getElementById('status').innerText = `æ­£åœ¨æƒæå…¨å ´å¹£ç¨®... æœ€å¾Œæ›´æ–°: ${new Date().toLocaleTimeString()}`;
        
        try {
            const res = await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr');
            const all = await res.json();
            // æ’é™¤ BTC, ETH, SOL, XRP, BNB, BNX (éµç…§ä½ çš„è¨­å®š)
            const filtered = all.filter(c => !['BTCUSDT','ETHUSDT','SOLUSDT','XRPUSDT','BNBUSDT','BNXUSDT'].includes(c.symbol));
            const top = filtered.sort((a,b) => b.quoteVolume - a.quoteVolume).slice(0, 100);

            for (let coin of top) {
                if (watchlistSymbols.has(coin.symbol)) {
                    document.getElementById(`price-${coin.symbol}`).innerText = coin.lastPrice;
                    const score = Math.floor((parseFloat(coin.priceChangePercent) - btcChangeGlobal) * 10 + 20);
                    document.getElementById(`score-${coin.symbol}`).innerText = score;
                    continue;
                }

                const kRes = await fetch(`https://fapi.binance.com/fapi/v1/klines?symbol=${coin.symbol}&interval=1m&limit=2`);
                const k = await kRes.json();
                const growth = ((parseFloat(k[1][4]) - parseFloat(k[0][1])) / parseFloat(k[0][1])) * 100;

                if (growth >= 1.5) {
                    watchlistSymbols.add(coin.symbol);
                    const score = Math.floor((parseFloat(coin.priceChangePercent) - btcChangeGlobal) * 10 + 20);
                    const row = `<tr>
                        <td style="color:#888">${new Date().toLocaleTimeString()}</td>
                        <td><b>${coin.symbol.replace('USDT','')}</b></td>
                        <td class="up">+${growth.toFixed(2)}% <span class="trigger-tag">çˆ†ç™¼</span></td>
                        <td><span id="score-${coin.symbol}" style="font-weight:bold; color:#f2a900">${score}</span></td>
                        <td id="price-${coin.symbol}">${coin.lastPrice}</td>
                    </tr>`;
                    document.getElementById('watchlist').insertAdjacentHTML('afterbegin', row);
                }
            }
        } catch (e) {}
    }

    function startMonitoring() {
        isRunning = true;
        document.getElementById('startBtn').disabled = true;
        document.getElementById('startBtn').innerText = "ğŸ“¡ ç›£æ§é€²è¡Œä¸­...";
        setInterval(scan, 4000); 
        scan();
    }

    setInterval(updateMarket, 2000);
    updateMarket();
</script>
</body>
</html>
